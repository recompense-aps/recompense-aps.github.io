// Generated by CoffeeScript 1.12.1
(function() {
  var Shield, exports,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  exports = this;

  exports.Player = (function(superClass) {
    extend(Player, superClass);

    Player.prototype.velocity = 0.4;

    Player.prototype.bulletFireDelay = 100;

    Player.prototype.bulletFiredAt = 0;

    Player.prototype.hp = 100;

    Player.prototype.PLAYER = true;

    Player.prototype._recoverTime = 2000;

    Player.prototype._recovering = false;

    Player.prototype.blinkEffect = null;

    function Player(game) {
      Player.__super__.constructor.call(this, game, 0, 0);
      this.Bind.Texture("player");
      this.Effects.Trail();
      this.Center();
      this.position.y = this.game.Camera.Viewport.height - this.rectangle.height * 2;
      this.drawIndex = 5;
      this.SetUpCollisions();
      this.shield = new Shield(this);
      this.bulletVector = new Torch.Vector(0, -1);
      this.shootPoint = new Torch.Shapes.Circle(this.game, 0, 0, 5, "green", "green");
      this.shootPoint.drawIndex = 1000;
      this.On("Damaged", (function(_this) {
        return function(event) {
          _this.hp -= event.damage;
          return _this.game.hud.playerHealth.Deplete(event.damage);
        };
      })(this));
      this.game.On("Lose", (function(_this) {
        return function() {
          return _this.Trash();
        };
      })(this));
    }

    Player.Load = function(game) {
      game.Load.Texture("Assets/Art/PNG/playerShip1_blue.png", "player");
      return game.Load.Texture("Assets/Art/PNG/Effects/shield3.png", "shield");
    };

    Player.prototype.Update = function() {
      var keys, m, v;
      Player.__super__.Update.call(this);
      if (this.hp <= 0) {
        this.game.State.Switch("lose");
      }
      v = this.position.Clone();
      v.x += this.rectangle.width / 2;
      v.y += this.rectangle.height / 2;
      m = new Torch.Vector(this.game.Mouse.x, this.game.Mouse.y);
      v.SubtractVector(m);
      v.Normalize();
      this.rotation = -v.angle;
      v.MultiplyScalar(-1);
      this.bulletVector = v;
      if (this.game.Mouse.down && (this.game.time - this.bulletFiredAt) >= this.bulletFireDelay) {
        this.bulletFiredAt = this.game.time;
        this.FireBullet();
      }
      keys = this.game.Keys;
      if (keys.P.down) {
        this.shield.Activate();
      } else {
        this.shield.Activate(false);
      }
      this.Body.velocity.Set(0, 0);
      if (keys.A.down) {
        this.Body.velocity.Set(-this.velocity, 0);
      }
      if (keys.D.down) {
        this.Body.velocity.Set(this.velocity, 0);
      }
      if (keys.S.down) {
        this.Body.velocity.Set(0, this.velocity);
      }
      if (keys.W.down) {
        return this.Body.velocity.Set(0, -this.velocity);
      }
    };

    Player.prototype.FireBullet = function() {
      var cordX, cordY, p1, rot, x, y;
      if (this.game.hud.battery.charge <= 0) {
        return;
      }
      rot = this.rotation - Math.PI / 2;
      cordX = Math.cos(rot);
      cordY = Math.sin(rot);
      this.game.hud.battery.Deplete(1);
      x = this.position.x + ((this.rectangle.width / 2) * cordX) + this.rectangle.width / 2;
      y = this.position.y + ((this.rectangle.height / 2) * cordY) + this.rectangle.height / 2;
      this.shootPoint.position.Set(x - 2.5, y - 2.5);
      p1 = new Projectile(this, {
        direction: this.bulletVector,
        x: x,
        y: y
      });
      p1.position.x -= p1.rectangle.width / 2;
      return p1.position.y -= p1.rectangle.height / 2;
    };

    Player.prototype.SetUpCollisions = function() {
      this.Collisions.Monitor();
      return this.On("Collision", (function(_this) {
        return function(event) {
          return _this.HandleCollision(event);
        };
      })(this));
    };

    Player.prototype.HandleCollision = function(event) {
      var obj;
      obj = event.collisionData.collider;
      if (obj.ENEMY && !this._recovering) {
        this.HandleEnemyCollision(obj);
      }
      if (obj.POWERUP) {
        return this.HandlePowerupCollision(obj);
      }
    };

    Player.prototype.HandleEnemyCollision = function(enemy) {
      this.Emit("Damaged", {
        damage: enemy.damage
      });
      enemy.Kill();
      this.blinkEffect = this.Effects.Blink(100);
      this._recovering = true;
      return this.game.Timer.SetFutureEvent(this._recoverTime, (function(_this) {
        return function() {
          _this.blinkEffect.Trash();
          _this._recovering = false;
          return _this.opacity = 1;
        };
      })(this));
    };

    Player.prototype.HandlePowerupCollision = function(powerup) {
      return powerup.ApplyEffect(this);
    };

    return Player;

  })(Torch.Sprite);

  Shield = (function(superClass) {
    extend(Shield, superClass);

    Shield.prototype.SHIELD = true;

    Shield.prototype.active = false;

    function Shield(player) {
      this.player = player;
      Shield.__super__.constructor.call(this, this.player.game, this.player.position.x, this.player.position.y);
      this.Bind.Texture("shield");
      this.Size.Scale(1, 1);
      this.draw = false;
      this.game.Tweens.Tween(this, 1000, Torch.Easing.Smooth).To({
        opacity: 0.4
      }).Cycle();
    }

    Shield.prototype.Update = function() {
      Shield.__super__.Update.call(this);
      this.position.x = this.player.position.x - this.rectangle.width / 5.5;
      return this.position.y = this.player.position.y - this.rectangle.height / 5;
    };

    Shield.prototype.Activate = function(turnOn) {
      if (turnOn == null) {
        turnOn = true;
      }
      this.active = turnOn;
      return this.draw = turnOn;
    };

    return Shield;

  })(Torch.Sprite);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxPcGVuU3BhY2VcXFNyY1xcUGxheWVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQSxNQUFBLGVBQUE7SUFBQTs7O0VBQUEsT0FBQSxHQUFVOztFQUNKLE9BQU8sQ0FBQzs7O3FCQUNWLFFBQUEsR0FBVTs7cUJBQ1YsZUFBQSxHQUFpQjs7cUJBQ2pCLGFBQUEsR0FBZTs7cUJBQ2YsRUFBQSxHQUFJOztxQkFDSixNQUFBLEdBQVE7O3FCQUVSLFlBQUEsR0FBYzs7cUJBQ2QsV0FBQSxHQUFhOztxQkFDYixXQUFBLEdBQWE7O0lBQ0EsZ0JBQUMsSUFBRDtNQUNULHdDQUFPLElBQVAsRUFBYSxDQUFiLEVBQWdCLENBQWhCO01BQ0EsSUFBQyxDQUFBLElBQUksQ0FBQyxPQUFOLENBQWMsUUFBZDtNQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFBO01BQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBQTtNQUVBLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUF0QixHQUErQixJQUFDLENBQUEsU0FBUyxDQUFDLE1BQVgsR0FBb0I7TUFDakUsSUFBQyxDQUFBLFNBQUQsR0FBYTtNQUViLElBQUMsQ0FBQSxlQUFELENBQUE7TUFDQSxJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsTUFBQSxDQUFPLElBQVA7TUFDZCxJQUFDLENBQUEsWUFBRCxHQUFvQixJQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBYixFQUFlLENBQUMsQ0FBaEI7TUFFcEIsSUFBQyxDQUFBLFVBQUQsR0FBa0IsSUFBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQWIsQ0FBb0IsSUFBQyxDQUFBLElBQXJCLEVBQTJCLENBQTNCLEVBQThCLENBQTlCLEVBQWlDLENBQWpDLEVBQW9DLE9BQXBDLEVB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LEdBQWMsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBakIsR0FBcUIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFYLEdBQW1CO2FBQ3RELElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWpCLEdBQXFCLElBQUMsQ0FBQSxTQUFTLENBQUMsTUFBWCxHQUFvQjtJQUhuRDs7cUJBS1IsUUFBQSxHQUFVLFNBQUMsTUFBRDs7UUFBQyxTQUFTOztNQUNoQixJQUFDLENBQUEsTUFBRCxHQUFVO2FBRVYsSUFBQyxDQUFBLElBQUQsR0FBUTtJQUhGOzs7O0tBakJPLEtBQUssQ0FBQztBQWhJM0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzID0gdGhpc1xyXG5jbGFzcyBleHBvcnRzLlBsYXllciBleHRlbmRzIFRvcmNoLlNwcml0ZVxyXG4gICAgdmVsb2NpdHk6IDAuNFxyXG4gICAgYnVsbGV0RmlyZURlbGF5OiAxMDBcclxuICAgIGJ1bGxldEZpcmVkQXQ6IDBcclxuICAgIGhwOiAxMDBcclxuICAgIFBMQVlFUjogdHJ1ZVxyXG5cclxuICAgIF9yZWNvdmVyVGltZTogMjAwMFxyXG4gICAgX3JlY292ZXJpbmc6IGZhbHNlXHJcbiAgICBibGlua0VmZmVjdDogbnVsbFxyXG4gICAgY29uc3RydWN0b3I6IChnYW1lKSAtPlxyXG4gICAgICAgIHN1cGVyKCBnYW1lLCAwLCAwIClcclxuICAgICAgICBAQmluZC5UZXh0dXJlKFwicGxheWVyXCIpXHJcbiAgICAgICAgQEVmZmVjdHMuVHJhaWwoKVxyXG4gICAgICAgIEBDZW50ZXIoKVxyXG5cclxuICAgICAgICBAcG9zaXRpb24ueSA9IEBnYW1lLkNhbWVyYS5WaWV3cG9ydC5oZWlnaHQgLSBAcmVjdGFuZ2xlLmhlaWdodCAqIDJcclxuICAgICAgICBAZHJhd0luZGV4ID0gNVxyXG5cclxuICAgICAgICBAU2V0VXBDb2xsaXNpb25zKClcclxuICAgICAgICBAc2hpZWxkID0gbmV3IFNoaWVsZChAKVxyXG4gICAgICAgIEBidWxsZXRWZWN0b3IgPSBuZXcgVG9yY2guVmVjdG9yKDAsLTEpXHJcblxyXG4gICAgICAgIEBzaG9vdFBvaW50ID0gbmV3IFRvcmNoLlNoYXBlcy5DaXJjbGUoQGdhbWUsIDAsIDAsIDUsIFwiZ3JlZW5cIiwgXCJncmVlblwiKVxyXG4gICAgICAgIEBzaG9vdFBvaW50LmRyYXdJbmRleCA9IDEwMDBcclxuXHJcbiAgICAgICAgQE9uIFwiRGFtYWdlZFwiLCAoZXZlbnQpID0+XHJcbiAgICAgICAgICAgIEBocCAtPSBldmVudC5kYW1hZ2VcclxuXHJcbiAgICAgICAgICAgIEBnYW1lLmh1ZC5wbGF5ZXJIZWFsdGguRGVwbGV0ZSggZXZlbnQuZGFtYWdlIClcclxuXHJcbiAgICAgICAgQGdhbWUuT24gXCJMb3NlXCIsID0+XHJcbiAgICAgICAgICAgIEBUcmFzaCgpICMgbWF5YmUgYWRkIGFuIGVmZmV0YyBoZXJlP1xyXG5cclxuICAgIEBMb2FkOiAoZ2FtZSkgLT5cclxuICAgICAgICBnYW1lLkxvYWQuVGV4dHVyZShcIkFzc2V0cy9BcnQvUE5HL3BsYXllclNoaXAxX2JsdWUucG5nXCIsIFwicGxheWVyXCIpXHJcbiAgICAgICAgZ2FtZS5Mb2FkLlRleHR1cmUoXCJBc3NldHMvQXJ0L1BORy9FZmZlY3RzL3NoaWVsZDMucG5nXCIsIFwic2hpZWxkXCIpXHJcblxyXG4gICAgVXBkYXRlOiAtPlxyXG4gICAgICAgIHN1cGVyKClcclxuXHJcbiAgICAgICAgaWYgQGhwIDw9IDBcclxuICAgICAgICAgICAgQGdhbWUuU3RhdGUuU3dpdGNoKFwibG9zZVwiKVxyXG5cclxuICAgICAgICB2ID0gQHBvc2l0aW9uLkNsb25lKClcclxuICAgICAgICB2LnggKz0gQHJlY3RhbmdsZS53aWR0aCAvIDJcclxuICAgICAgICB2LnkgKz0gQHJlY3RhbmdsZS5oZWlnaHQgLzJcclxuXHJcbiAgICAgICAgbSA9IG5ldyBUb3JjaC5WZWN0b3IoIEBnYW1lLk1vdXNlLngsIEBnYW1lLk1vdXNlLnkgKVxyXG5cclxuICAgICAgICB2LlN1YnRyYWN0VmVjdG9yKCBtIClcclxuICAgICAgICB2Lk5vcm1hbGl6ZSgpXHJcbiAgICAgICAgQHJvdGF0aW9uID0gLXYuYW5nbGVcclxuXHJcbiAgICAgICAgdi5NdWx0aXBseVNjYWxhcigtMSlcclxuICAgICAgICBAYnVsbGV0VmVjdG9yID0gdlxyXG5cclxuICAgICAgICBpZiBAZ2FtZS5Nb3VzZS5kb3duIGFuZCAoIEBnYW1lLnRpbWUgLSBAYnVsbGV0RmlyZWRBdCApID49IEBidWxsZXRGaXJlRGVsYXlcclxuICAgICAgICAgICAgQGJ1bGxldEZpcmVkQXQgPSBAZ2FtZS50aW1lXHJcbiAgICAgICAgICAgIEBGaXJlQnVsbGV0KClcclxuXHJcbiAgICAgICAga2V5cyA9IEBnYW1lLktleXNcclxuXHJcbiAgICAgICAgaWYga2V5cy5QLmRvd25cclxuICAgICAgICAgICAgQHNoaWVsZC5BY3RpdmF0ZSgpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBAc2hpZWxkLkFjdGl2YXRlKGZhbHNlKVxyXG5cclxuICAgICAgICBAQm9keS52ZWxvY2l0eS5TZXQoMCwwKVxyXG4gICAgICAgIGlmIGtleXMuQS5kb3duXHJcbiAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LlNldCgtQHZlbG9jaXR5LDApXHJcbiAgICAgICAgaWYga2V5cy5ELmRvd25cclxuICAgICAgICAgICAgQEJvZHkudmVsb2NpdHkuU2V0KEB2ZWxvY2l0eSwwKVxyXG4gICAgICAgIGlmIGtleXMuUy5kb3duXHJcbiAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LlNldCgwLEB2ZWxvY2l0eSlcclxuICAgICAgICBpZiBrZXlzLlcuZG93blxyXG4gICAgICAgICAgICBAQm9keS52ZWxvY2l0eS5TZXQoMCwtQHZlbG9jaXR5KVxyXG5cclxuICAgIEZpcmVCdWxsZXQ6IC0+XHJcbiAgICAgICAgcmV0dXJuIGlmIEBnYW1lLmh1ZC5iYXR0ZXJ5LmNoYXJnZSA8PSAwXHJcbiAgICAgICAgcm90ID0gQHJvdGF0aW9uIC0gTWF0aC5QSS8yXHJcbiAgICAgICAgY29yZFggPSBNYXRoLmNvcyggcm90IClcclxuICAgICAgICBjb3JkWSA9IE1hdGguc2luKCByb3QgKVxyXG5cclxuICAgICAgICBAZ2FtZS5odWQuYmF0dGVyeS5EZXBsZXRlKDEpXHJcblxyXG4gICAgICAgIHggPSBAcG9zaXRpb24ueCArICggKEByZWN0YW5nbGUud2lkdGggLyAyKSAqIGNvcmRYICkgKyBAcmVjdGFuZ2xlLndpZHRoLzJcclxuICAgICAgICB5ID0gQHBvc2l0aW9uLnkgKyAoIChAcmVjdGFuZ2xlLmhlaWdodCAvIDIpICogY29yZFkgKSArIEByZWN0YW5nbGUuaGVpZ2h0LzJcclxuXHJcbiAgICAgICAgQHNob290UG9pbnQucG9zaXRpb24uU2V0KCB4IC0gMi41LCB5IC0gMi41IClcclxuXHJcbiAgICAgICAgcDEgPSBuZXcgUHJvamVjdGlsZSBALFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246IEBidWxsZXRWZWN0b3JcclxuICAgICAgICAgICAgeDogeFxyXG4gICAgICAgICAgICB5OiB5XHJcblxyXG4gICAgICAgIHAxLnBvc2l0aW9uLnggLT0gcDEucmVjdGFuZ2xlLndpZHRoLzJcclxuICAgICAgICBwMS5wb3NpdGlvbi55IC09IHAxLnJlY3RhbmdsZS5oZWlnaHQvMlxyXG5cclxuICAgIFNldFVwQ29sbGlzaW9uczogLT5cclxuICAgICAgICBAQ29sbGlzaW9ucy5Nb25pdG9yKClcclxuICAgICAgICBAT24gXCJDb2xsaXNpb25cIiwgKGV2ZW50KSA9PlxyXG4gICAgICAgICAgICBASGFuZGxlQ29sbGlzaW9uKGV2ZW50KVxyXG5cclxuICAgIEhhbmRsZUNvbGxpc2lvbjogKGV2ZW50KSAtPlxyXG4gICAgICAgIG9iaiA9IGV2ZW50LmNvbGxpc2lvbkRhdGEuY29sbGlkZXJcclxuXHJcbiAgICAgICAgaWYgb2JqLkVORU1ZIGFuZCBub3QgQF9yZWNvdmVyaW5nXHJcbiAgICAgICAgICAgIEBIYW5kbGVFbmVteUNvbGxpc2lvbihvYmopXHJcblxyXG4gICAgICAgIGlmIG9iai5QT1dFUlVQXHJcbiAgICAgICAgICAgIEBIYW5kbGVQb3dlcnVwQ29sbGlzaW9uKG9iailcclxuXHJcbiAgICBIYW5kbGVFbmVteUNvbGxpc2lvbjogKGVuZW15KSAtPlxyXG4gICAgICAgIEBFbWl0KCBcIkRhbWFnZWRcIiwgZGFtYWdlOmVuZW15LmRhbWFnZSApXHJcbiAgICAgICAgZW5lbXkuS2lsbCgpXHJcbiAgICAgICAgQGJsaW5rRWZmZWN0ID0gQEVmZmVjdHMuQmxpbmsoMTAwKVxyXG4gICAgICAgIEBfcmVjb3ZlcmluZyA9IHRydWVcclxuXHJcbiAgICAgICAgQGdhbWUuVGltZXIuU2V0RnV0dXJlRXZlbnQgQF9yZWNvdmVyVGltZSwgPT5cclxuICAgICAgICAgICAgQGJsaW5rRWZmZWN0LlRyYXNoKClcclxuICAgICAgICAgICAgQF9yZWNvdmVyaW5nID0gZmFsc2VcclxuICAgICAgICAgICAgQG9wYWNpdHkgPSAxXHJcblxyXG4gICAgSGFuZGxlUG93ZXJ1cENvbGxpc2lvbjogKHBvd2VydXApIC0+XHJcbiAgICAgICAgcG93ZXJ1cC5BcHBseUVmZmVjdChAKVxyXG5cclxuY2xhc3MgU2hpZWxkIGV4dGVuZHMgVG9yY2guU3ByaXRlXHJcbiAgICBTSElFTEQ6IHRydWVcclxuICAgIGFjdGl2ZTogZmFsc2VcclxuICAgIGNvbnN0cnVjdG9yOiAoQHBsYXllcikgLT5cclxuICAgICAgICBzdXBlciggQHBsYXllci5nYW1lLCBAcGxheWVyLnBvc2l0aW9uLngsIEBwbGF5ZXIucG9zaXRpb24ueSApXHJcbiAgICAgICAgQEJpbmQuVGV4dHVyZShcInNoaWVsZFwiKVxyXG4gICAgICAgIEBTaXplLlNjYWxlKDEsMSlcclxuICAgICAgICBAZHJhdyA9IGZhbHNlXHJcblxyXG4gICAgICAgICMgbWFrZSBpdCBibGluayBhIGxpdHRsZVxyXG4gICAgICAgIEBnYW1lLlR3ZWVucy5Ud2VlbiggQCwgMTAwMCwgVG9yY2guRWFzaW5nLlNtb290aCApLlRvKCBvcGFjaXR5OiAwLjQgKS5DeWNsZSgpXHJcblxyXG4gICAgVXBkYXRlOiAtPlxyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBAcG9zaXRpb24ueCA9IEBwbGF5ZXIucG9zaXRpb24ueCAtIEByZWN0YW5nbGUud2lkdGggLyA1LjVcclxuICAgICAgICBAcG9zaXRpb24ueSA9IEBwbGF5ZXIucG9zaXRpb24ueSAtIEByZWN0YW5nbGUuaGVpZ2h0IC8gNVxyXG5cclxuICAgIEFjdGl2YXRlOiAodHVybk9uID0gdHJ1ZSkgLT5cclxuICAgICAgICBAYWN0aXZlID0gdHVybk9uXHJcblxyXG4gICAgICAgIEBkcmF3ID0gdHVybk9uXHJcbiJdfQ==
//# sourceURL=C:\dev\js\Torch.js\Games\OpenSpace\Src\Player.coffee